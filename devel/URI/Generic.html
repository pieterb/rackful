<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: URI::Generic
  
    &mdash; Lucipher
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (G)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../URI.html" title="URI (module)">URI</a></span></span>
     &raquo; 
    <span class="title">Generic</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: URI::Generic
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">URI::Generic</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/rackful/uri.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Extension and monkeypatch of Ruby’s StdLib URI::Generic class.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize-instance_method" title="#normalize (instance method)">- (URI::Generic) <strong>normalize</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A normalized copy of <code>self</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize%21-instance_method" title="#normalize! (instance method)">- (self<sup>?</sup>) <strong>normalize!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Monkeypatch of <a
href="http://ruby-doc.org/stdlib/libdoc/uri/rdoc/URI/Generic.html#method-i-normalize-21">Ruby’s
StdLib implementation</a>.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#relative_deprecated-instance_method" title="#relative_deprecated (instance method)">- (String) <strong>relative_deprecated</strong>(base_path) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#segments-instance_method" title="#segments (instance method)">- (Array&lt;String&gt;) <strong>segments</strong>(encoding = Encoding::UTF_8) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unencoded segments.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#slashify-instance_method" title="#slashify (instance method)">- (Path) <strong>slashify</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A copy of <code>self</code>, with a trailing slash.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#slashify%21-instance_method" title="#slashify! (instance method)">- (self) <strong>slashify!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds a trailing slash to <code>self</code> if necessary.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unslashify-instance_method" title="#unslashify (instance method)">- (Path) <strong>unslashify</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A copy of <code>self</code> without trailing slashes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unslashify%21-instance_method" title="#unslashify! (instance method)">- (self) <strong>unslashify!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Removes trailing slashes from <code>self</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uri_generic_normalize-instance_method" title="#uri_generic_normalize (instance method)">- (void) <strong>uri_generic_normalize</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Copy of the original StdLib <a
href="http://ruby-doc.org/stdlib/libdoc/uri/rdoc/URI/Generic.html#method-i-normalize-21">URI::Generic::normalize!</a>
method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uri_generic_normalize%21-instance_method" title="#uri_generic_normalize! (instance method)">- (void) <strong>uri_generic_normalize!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Copy of the original StdLib <a
href="http://ruby-doc.org/stdlib/libdoc/uri/rdoc/URI/Generic.html#method-i-normalize-21">URI::Generic::normalize!</a>
method.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="normalize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="URI::Generic (class)">URI::Generic</a></span></tt>) <strong>normalize</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a normalized copy of <code>self</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="URI::Generic (class)">URI::Generic</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a normalized copy of <code>self</code>.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 20</span>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize'>normalize</span>
  <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_normalize!'>normalize!</span>
  <span class='id identifier rubyid_r'>r</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalize!-instance_method">
  
    - (<tt>self</tt><sup>?</sup>) <strong>normalize!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Monkeypatch of <a
href="http://ruby-doc.org/stdlib/libdoc/uri/rdoc/URI/Generic.html#method-i-normalize-21">Ruby’s
StdLib implementation</a>. In addition to the default implementation, this
implementation ensures that</p>
<ol><li>
<p><em>no</em> unreserved characters are pct-encoded, and</p>
</li><li>
<p>all non-unreserved characters <em>are</em> pct-encoded.</p>
</li></ol>

<p>Check <a href="http://tools.ietf.org/html/rfc3986">RFC3986</a> syntax:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_abempty'>abempty</span> <span class='op'>=</span> <span class='op'>*</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span><span class='lparen'>(</span><span class='id identifier rubyid_unreserved'>unreserved</span> <span class='op'>/</span> <span class='id identifier rubyid_pct'>pct</span><span class='op'>-</span><span class='id identifier rubyid_encoded'>encoded</span> <span class='op'>/</span> <span class='id identifier rubyid_sub'>sub</span><span class='op'>-</span><span class='id identifier rubyid_delims'>delims</span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rparen'>)</span>
<span class='id identifier rubyid_unreserved'>unreserved</span> <span class='op'>=</span> <span class='const'>ALPHA</span> <span class='op'>/</span> <span class='const'>DIGIT</span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>~</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_sub'>sub</span><span class='op'>-</span><span class='id identifier rubyid_delims'>delims</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>/</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span></code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p><code>self</code> if the URI was modified, or <code>nil</code> of the uri
was already in normal form.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_normalize!'>normalize!</span>
  <span class='comment'>#unless %r{\A(?:/(?:[a-z0-9\-._~!$&amp;'()*+,;=:@]|%[0-9a-f]{2})*)*\z}i === self.path
</span>  <span class='comment'>#  raise TypeError, &quot;Can’t convert String #{self.path.inspect} to Rackful::Path&quot;
</span>  <span class='comment'>#end
</span>  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_uri_generic_normalize!'>uri_generic_normalize!</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_segments'>segments</span><span class='lparen'>(</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>BINARY</span> <span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_segment'>segment</span><span class='op'>|</span>
    <span class='id identifier rubyid_segment'>segment</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([^a-zA-Z0-9\-._~]+)</span><span class='regexp_end'>/n</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%</span><span class='tstring_end'>'</span></span><span class='op'>+</span><span class='backref'>$1</span><span class='period'>.</span><span class='id identifier rubyid_unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>H2</span><span class='tstring_end'>'</span></span><span class='op'>*</span><span class='id identifier rubyid_bytesize'>bytesize</span><span class='lparen'>(</span><span class='backref'>$1</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="relative_deprecated-instance_method">
  
    - (<tt>String</tt>) <strong>relative_deprecated</strong>(base_path) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'></div></div>

<p>Turns a relative URI (starting with <code>/</code>) into a relative path
(starting with <code>./</code> or <code>../</code>)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>base_path</span>
      
      
        <span class='type'>(<tt>Path</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a relative URI</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 113</span>

<span class='kw'>def</span> <span class='id identifier rubyid_relative_deprecated'>relative_deprecated</span> <span class='id identifier rubyid_base_path'>base_path</span>
  <span class='kw'>case</span> <span class='kw'>self</span>
  <span class='kw'>when</span> <span class='id identifier rubyid_base_path'>base_path</span>
    <span class='comment'># RFC2396, Section 4.2
</span>    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:\A|/)\.\.?(?:/|\z)</span><span class='regexp_end'>}</span></span>
    <span class='comment'># self has abnormal absolute path,
</span>    <span class='comment'># like &quot;/./&quot;, &quot;/../&quot;, &quot;/x/../&quot;, ...
</span>    <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_src_path'>src_path</span> <span class='op'>=</span> <span class='id identifier rubyid_base_path'>base_path</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:\A|[^/]+)/</span><span class='regexp_end'>}</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dst_path'>dst_path</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>(?:\A|[^/]+)/?</span><span class='regexp_end'>}</span></span><span class='rparen'>)</span>

  <span class='comment'># discard same parts
</span>  <span class='kw'>while</span> <span class='op'>!</span><span class='id identifier rubyid_dst_path'>dst_path</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dst_path'>dst_path</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>==</span> <span class='id identifier rubyid_src_path'>src_path</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
    <span class='id identifier rubyid_src_path'>src_path</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>
    <span class='id identifier rubyid_dst_path'>dst_path</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_tmp'>tmp</span> <span class='op'>=</span> <span class='id identifier rubyid_dst_path'>dst_path</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span>

  <span class='comment'># calculate
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_src_path'>src_path</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_tmp'>tmp</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>./</span><span class='tstring_end'>'</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_dst_path'>dst_path</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='comment'># (see RFC2396 Section 5)
</span>      <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>./</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id identifier rubyid_tmp'>tmp</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_tmp'>tmp</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>../</span><span class='tstring_end'>'</span></span> <span class='op'>*</span> <span class='id identifier rubyid_src_path'>src_path</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>+</span> <span class='id identifier rubyid_tmp'>tmp</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="segments-instance_method">
  
    - (<tt>Array&lt;String&gt;</tt>) <strong>segments</strong>(encoding = Encoding::UTF_8) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns Unencoded segments</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Unencoded segments</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_segments'>segments</span><span class='lparen'>(</span> <span class='id identifier rubyid_encoding'>encoding</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span> <span class='rparen'>)</span>
  <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>/+</span><span class='regexp_end'>}</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span>
    <span class='const'>Rack</span><span class='op'>::</span><span class='const'>Utils</span><span class='period'>.</span><span class='id identifier rubyid_unescape'>unescape</span><span class='lparen'>(</span> <span class='id identifier rubyid_s'>s</span><span class='comma'>,</span> <span class='id identifier rubyid_encoding'>encoding</span> <span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>
  <span class='id identifier rubyid_r'>r</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="slashify-instance_method">
  
    - (<tt>Path</tt>) <strong>slashify</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a copy of <code>self</code>, with a trailing slash.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Path</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a copy of <code>self</code>, with a trailing slash.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_slashify'>slashify</span>
  <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_slashify!'>slashify!</span>
  <span class='id identifier rubyid_r'>r</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="slashify!-instance_method">
  
    - (<tt>self</tt>) <strong>slashify!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds a trailing slash to <code>self</code> if necessary.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70
71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_slashify!'>slashify!</span>
  <span class='kw'>if</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span> <span class='op'>!=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span>
    <span class='kw'>self</span>
  <span class='kw'>else</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unslashify-instance_method">
  
    - (<tt>Path</tt>) <strong>unslashify</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a copy of <code>self</code> without trailing slashes.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Path</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a copy of <code>self</code> without trailing slashes.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unslashify'>unslashify</span>
  <span class='id identifier rubyid_r'>r</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_unslashify!'>unslashify!</span>
  <span class='id identifier rubyid_r'>r</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unslashify!-instance_method">
  
    - (<tt>self</tt>) <strong>unslashify!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Removes trailing slashes from <code>self</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unslashify!'>unslashify!</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_sub'>sub</span><span class='lparen'>(</span> <span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>/+\z</span><span class='regexp_end'>}</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>==</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span>
    <span class='kw'>nil</span>
  <span class='kw'>else</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uri_generic_normalize-instance_method">
  
    - (<tt>void</tt>) <strong>uri_generic_normalize</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Copy of the original StdLib <a
href="http://ruby-doc.org/stdlib/libdoc/uri/rdoc/URI/Generic.html#method-i-normalize-21">URI::Generic::normalize!</a>
method.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 15</span>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:uri_generic_normalize</span><span class='comma'>,</span> <span class='symbol'>:normalize</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uri_generic_normalize!-instance_method">
  
    - (<tt>void</tt>) <strong>uri_generic_normalize!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Copy of the original StdLib <a
href="http://ruby-doc.org/stdlib/libdoc/uri/rdoc/URI/Generic.html#method-i-normalize-21">URI::Generic::normalize!</a>
method.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rackful/uri.rb', line 8</span>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:uri_generic_normalize!</span><span class='comma'>,</span> <span class='symbol'>:normalize!</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Feb 14 16:57:20 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.3 (ruby-1.9.3).
</div>

  </body>
</html>